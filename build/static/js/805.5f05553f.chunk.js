"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[805],{5710:function(t,n,e){e.d(n,{j3:function(){return o}});e(2791);var i=e(814),a=e(5796),r=e(184),o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.Z.confirm({title:n.title||"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438?",icon:(0,r.jsx)(a.Z,{}),content:n.content||"\u0426\u044e \u0434\u0456\u044e \u043d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438.",okText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",okType:"danger",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onOk:t})}},4685:function(t,n,e){var i=e(1413),a=e(2808),r=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.Z)((0,i.Z)({url:n.startsWith("/api")?n:"/api/".concat(n),method:t},e))},o={get:function(t,n){return r("get",t,{params:n})},post:function(t,n){return r("post",t,{data:n})},put:function(t,n){return r("put",t,{data:n})},delete:function(t){return r("delete",t)},user:function(){return r("get","/api/user")},logout:function(){return r("get","/api/logout")},adminSummary:function(t){return r("get","/api/admin",{params:t})},adminRequests:function(t){return r("get","/api/admin/requests",{params:t})},adminJobs:function(t){return r("get","/api/admin/jobs",{params:t})},adminLogs:function(t){return r("get","/api/admin/logs",{params:t})},adminTrackingUsers:function(t){return r("get","/api/admin/tracking-users",{params:t})},adminRequestsByIp:function(t){return r("get","/api/admin/requests-by-ip",{params:t})},adminRequestsByCountry:function(t){return r("get","/api/admin/requests-by-country",{params:t})},lastNotices:function(){return r("get","/api/dashboard/last-notices")},users:function(t){return r("get","/api/users",{params:t})},userShow:function(t){return r("get","/api/users/".concat(t))},userStore:function(t){return r("post","/api/users",{data:t})},userUpdate:function(t,n){return r("put","/api/users/".concat(t),{data:n})},userDelete:function(t){return r("delete","/api/users/".concat(t))},usersAll:function(){return r("get","/api/users/all")},adsSources:function(t){return r("get","/api/ads-sources",{params:t})},adsSourceShow:function(t){return r("get","/api/ads-sources/".concat(t))},adsSourceStore:function(t){return r("post","/api/ads-sources",{data:t})},adsSourceUpdate:function(t,n){return r("put","/api/ads-sources/".concat(t),{data:n})},adsSourceDelete:function(t){return r("delete","/api/ads-sources/".concat(t))},integrationsFbCapi:function(t){return r("get","/api/integrations/fb-capi",{params:t})},integrationFbCapiShow:function(t){return r("get","/api/integrations/fb-capi/".concat(t))},integrationFbCapiStore:function(t){return r("post","/api/integrations/fb-capi",{data:t})},integrationFbCapiUpdate:function(t,n){return r("put","/api/integrations/fb-capi/".concat(t),{data:n})},integrationFbCapiDelete:function(t){return r("delete","/api/integrations/fb-capi/".concat(t))},integrationsTiktok:function(t){return r("get","/api/integrations/tiktok",{params:t})},integrationTiktokShow:function(t){return r("get","/api/integrations/tiktok/".concat(t))},integrationTiktokStore:function(t){return r("post","/api/integrations/tiktok",{data:t})},integrationTiktokUpdate:function(t,n){return r("put","/api/integrations/tiktok/".concat(t),{data:n})},integrationTiktokDelete:function(t){return r("delete","/api/integrations/tiktok/".concat(t))},integrationsX:function(t){return r("get","/api/integrations/x",{params:t})},integrationXShow:function(t){return r("get","/api/integrations/x/".concat(t))},integrationXStore:function(t){return r("post","/api/integrations/x",{data:t})},integrationXUpdate:function(t,n){return r("put","/api/integrations/x/".concat(t),{data:n})},integrationXDelete:function(t){return r("delete","/api/integrations/x/".concat(t))},integrationsGadsConversions:function(t){return r("get","/api/integrations/gads-conversions",{params:t})},integrationGadsConversionsShow:function(t){return r("get","/api/integrations/gads-conversions/".concat(t))},integrationGadsConversionsStore:function(t){return r("post","/api/integrations/gads-conversions",{data:t})},integrationGadsConversionsUpdate:function(t,n){return r("put","/api/integrations/gads-conversions/".concat(t),{data:n})},integrationGadsConversionsDelete:function(t){return r("delete","/api/integrations/gads-conversions/".concat(t))},integrationsGoogleSheets:function(t){return r("get","/api/integrations/google-sheets",{params:t})},integrationGoogleSheetsShow:function(t){return r("get","/api/integrations/google-sheets/".concat(t))},integrationGoogleSheetsStore:function(t){return r("post","/api/integrations/google-sheets",{data:t})},integrationGoogleSheetsUpdate:function(t,n){return r("put","/api/integrations/google-sheets/".concat(t),{data:n})},integrationGoogleSheetsDelete:function(t){return r("delete","/api/integrations/google-sheets/".concat(t))},integrationsScriptBundles:function(t){return r("get","/api/integrations/script-bundles",{params:t})},integrationScriptBundlesShow:function(t){return r("get","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesStore:function(t,n){return n?r("put","/api/integrations/script-bundles/".concat(n),{data:t}):r("post","/api/integrations/script-bundles",{data:t})},integrationScriptBundlesUpdate:function(t,n){return r("put","/api/integrations/script-bundles/".concat(t),{data:n})},integrationScriptBundlesDelete:function(t){return r("delete","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesIntegrationsAccounts:function(){return r("get","/api/integrations/script-bundles/integrations-accounts")},integrationScriptBundlesJsContent:function(){return r("get","/api/integrations/script-bundles/js-content")},integrationEventsCount:function(t){return r("get","/api/integrations/events-".concat(t))},integrationsFbAdsBalances:function(t){return r("get","/api/integrations/fb-ads-balances",{params:t})},integrationFbAdsBalancesShow:function(t){return r("get","/api/integrations/fb-ads-balances/".concat(t))},integrationFbAdsBalancesStore:function(t){return r("post","/api/integrations/fb-ads-balances",{data:t})},integrationFbAdsBalancesUpdate:function(t,n){return r("put","/api/integrations/fb-ads-balances/".concat(t),{data:n})},integrationFbAdsBalancesDelete:function(t){return r("delete","/api/integrations/fb-ads-balances/".concat(t))},integrationsCsdProjects:function(t){return r("get","/api/integrations/csd-projects",{params:t})},integrationCsdProjectsShow:function(t){return r("get","/api/integrations/csd-projects/".concat(t))},integrationCsdProjectsStore:function(t){return r("post","/api/integrations/csd-projects",{data:t})},integrationCsdProjectsUpdate:function(t,n){return r("put","/api/integrations/csd-projects/".concat(t),{data:n})},integrationCsdProjectsDelete:function(t){return r("delete","/api/integrations/csd-projects/".concat(t))},integrationEvents:function(t,n){return r("get","/api/integrations/events-".concat(t,"/").concat(n))},integrationEventsCountByEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByEvents"),{params:e})},integrationEventsCountByDaysAndEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByDaysAndEvents"),{params:e})},integrationEventsList:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/list"),{params:e})}};n.Z=o},805:function(t,n,e){e.r(n),e.d(n,{AdsSourceDetail:function(){return x}});var i=e(4165),a=e(5861),r=e(9439),o=e(2791),s=e(7689),c=e(43),u=e(6473),l=e(7309),d=e(3099),p=e(7174),g=e(9372),f=e(1752),m=e(2622),v=e(4685),b=e(9305),h=e(5710),Z=e(2992),S=e(184),x=function(){var t=(0,s.UO)().id,n=(0,s.s0)(),e=(0,o.useState)(null),x=(0,r.Z)(e,2),k=x[0],j=x[1],C=(0,o.useState)(!0),y=(0,r.Z)(C,2),w=y[0],B=y[1],A=(0,o.useState)(!1),D=(0,r.Z)(A,2),F=D[0],T=D[1],U=function(){t&&(B(!0),v.Z.adsSourceShow(t).then(j).catch((function(){return j(null)})).finally((function(){return B(!1)})))};(0,o.useEffect)((function(){return U()}),[t]);return w?(0,S.jsx)(c.Z,{size:"large",style:{display:"block",margin:"48px auto"}}):k?(0,S.jsxs)("div",{children:[(0,S.jsxs)(d.Z,{style:{marginBottom:16},children:[(0,S.jsx)(l.ZP,{type:"text",icon:(0,S.jsx)(g.Z,{}),onClick:function(){return n("".concat(b.sH,"/ads-sources"))},children:"\u041d\u0430\u0437\u0430\u0434"}),(0,S.jsx)(l.ZP,{type:"primary",icon:(0,S.jsx)(f.Z,{}),onClick:function(){return T(!0)},children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,S.jsx)(l.ZP,{danger:!0,icon:(0,S.jsx)(m.Z,{}),onClick:function(){(0,h.j3)((0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.adsSourceDelete(t);case 2:n("".concat(b.sH,"/ads-sources"));case 3:case"end":return e.stop()}}),e)}))),{content:'\u0414\u0436\u0435\u0440\u0435\u043b\u043e "'.concat(null===k||void 0===k?void 0:k.name,'" \u0431\u0443\u0434\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e.')})},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]}),(0,S.jsx)(u.Z,{title:k.name||"Ads Source #".concat(k.id),className:"card-elevated",children:(0,S.jsxs)(p.Z,{bordered:!0,column:1,size:"small",children:[(0,S.jsx)(p.Z.Item,{label:"ID",children:k.id}),(0,S.jsx)(p.Z.Item,{label:"\u041d\u0430\u0437\u0432\u0430",children:k.name||"\u2014"}),(0,S.jsx)(p.Z.Item,{label:"\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430",children:k.platform||"\u2014"})]})}),(0,S.jsx)(Z.Z,{visible:F,onClose:function(){return T(!1)},editItem:k,onSuccess:U})]}):(0,S.jsx)(u.Z,{title:"\u041d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e",children:(0,S.jsx)(l.ZP,{onClick:function(){return n("".concat(b.sH,"/ads-sources"))},children:"\u2190 \u041d\u0430\u0437\u0430\u0434"})})};n.default=x},2992:function(t,n,e){var i=e(4165),a=e(1413),r=e(5861),o=e(9439),s=e(2791),c=e(7615),u=e(814),l=e(177),d=e(7145),p=e(1306),g=e(4685),f=e(184),m=[{label:"Facebook",value:"fb"},{label:"TikTok",value:"tiktok"},{label:"Google Ads",value:"gads"}];n.Z=function(t){var n=t.visible,e=t.onClose,v=t.editItem,b=t.onSuccess,h=c.Z.useForm(),Z=(0,o.Z)(h,1)[0],S=(0,s.useState)(!1),x=(0,o.Z)(S,2),k=x[0],j=x[1],C=(0,s.useState)([]),y=(0,o.Z)(C,2),w=y[0],B=y[1],A=!(null===v||void 0===v||!v.id);(0,s.useEffect)((function(){var t,e,i;n&&(g.Z.usersAll().then((function(t){return B(Array.isArray(t)?t:[])})),Z.setFieldsValue({name:null!==(t=null===v||void 0===v?void 0:v.name)&&void 0!==t?t:"",platform:null!==(e=null===v||void 0===v?void 0:v.platform)&&void 0!==e?e:"fb",user_id:null!==(i=null===v||void 0===v?void 0:v.user_id)&&void 0!==i?i:void 0,active:0!==(null===v||void 0===v?void 0:v.active)&&!1!==(null===v||void 0===v?void 0:v.active)}))}),[n,v,Z]);var D=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var n,r,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.validateFields();case 3:if(n=t.sent,j(!0),!A){t.next=10;break}return t.next=8,g.Z.adsSourceUpdate(v.id,(0,a.Z)((0,a.Z)({},n),{},{accounts:null!==(r=v.accounts)&&void 0!==r?r:[],settings:null!==(o=v.settings)&&void 0!==o?o:{}}));case 8:t.next=12;break;case 10:return t.next=12,g.Z.adsSourceStore((0,a.Z)((0,a.Z)({},n),{},{accounts:[],settings:{}}));case 12:null===b||void 0===b||b(),e(),t.next=20;break;case 16:if(t.prev=16,t.t0=t.catch(0),!t.t0.errorFields){t.next=20;break}return t.abrupt("return");case 20:return t.prev=20,j(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,16,20,23]])})));return function(){return t.apply(this,arguments)}}(),F=w.map((function(t){return{label:t.name||t.email,value:t.id}}));return(0,f.jsx)(u.Z,{open:n,title:A?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u0436\u0435\u0440\u0435\u043b\u043e":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0434\u0436\u0435\u0440\u0435\u043b\u043e \u0434\u0430\u043d\u0438\u0445",okText:A?"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onCancel:e,onOk:D,confirmLoading:k,destroyOnClose:!0,width:400,children:(0,f.jsxs)(c.Z,{form:Z,layout:"vertical",children:[(0,f.jsx)(c.Z.Item,{name:"name",label:"\u041d\u0430\u0437\u0432\u0430",rules:[{required:!0}],children:(0,f.jsx)(l.Z,{placeholder:"\u041b\u0430\u0442\u0438\u043d\u0438\u0446\u044f, _ -"})}),(0,f.jsx)(c.Z.Item,{name:"platform",label:"\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430",rules:[{required:!0}],children:(0,f.jsx)(d.Z,{options:m})}),(0,f.jsx)(c.Z.Item,{name:"user_id",label:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447",children:(0,f.jsx)(d.Z,{allowClear:!0,options:F,placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c"})}),(0,f.jsx)(c.Z.Item,{name:"active",label:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",valuePropName:"checked",children:(0,f.jsx)(p.Z,{})})]})})}}}]);
//# sourceMappingURL=805.5f05553f.chunk.js.map