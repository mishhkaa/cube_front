"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[618],{4685:function(t,n,e){var i=e(1413),a=e(2808),r=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.Z)((0,i.Z)({url:n.startsWith("/api")?n:"/api/".concat(n),method:t},e))},s={get:function(t,n){return r("get",t,{params:n})},post:function(t,n){return r("post",t,{data:n})},put:function(t,n){return r("put",t,{data:n})},delete:function(t){return r("delete",t)},user:function(){return r("get","/api/user")},logout:function(){return r("get","/api/logout")},adminSummary:function(t){return r("get","/api/admin",{params:t})},adminRequests:function(t){return r("get","/api/admin/requests",{params:t})},adminJobs:function(t){return r("get","/api/admin/jobs",{params:t})},adminLogs:function(t){return r("get","/api/admin/logs",{params:t})},adminTrackingUsers:function(t){return r("get","/api/admin/tracking-users",{params:t})},adminRequestsByIp:function(t){return r("get","/api/admin/requests-by-ip",{params:t})},adminRequestsByCountry:function(t){return r("get","/api/admin/requests-by-country",{params:t})},lastNotices:function(){return r("get","/api/dashboard/last-notices")},users:function(t){return r("get","/api/users",{params:t})},userShow:function(t){return r("get","/api/users/".concat(t))},userStore:function(t){return r("post","/api/users",{data:t})},userUpdate:function(t,n){return r("put","/api/users/".concat(t),{data:n})},userDelete:function(t){return r("delete","/api/users/".concat(t))},usersAll:function(){return r("get","/api/users/all")},adsSources:function(t){return r("get","/api/ads-sources",{params:t})},adsSourceShow:function(t){return r("get","/api/ads-sources/".concat(t))},adsSourceStore:function(t){return r("post","/api/ads-sources",{data:t})},adsSourceUpdate:function(t,n){return r("put","/api/ads-sources/".concat(t),{data:n})},adsSourceDelete:function(t){return r("delete","/api/ads-sources/".concat(t))},integrationsFbCapi:function(t){return r("get","/api/integrations/fb-capi",{params:t})},integrationFbCapiShow:function(t){return r("get","/api/integrations/fb-capi/".concat(t))},integrationFbCapiStore:function(t){return r("post","/api/integrations/fb-capi",{data:t})},integrationFbCapiUpdate:function(t,n){return r("put","/api/integrations/fb-capi/".concat(t),{data:n})},integrationFbCapiDelete:function(t){return r("delete","/api/integrations/fb-capi/".concat(t))},integrationsTiktok:function(t){return r("get","/api/integrations/tiktok",{params:t})},integrationTiktokShow:function(t){return r("get","/api/integrations/tiktok/".concat(t))},integrationTiktokStore:function(t){return r("post","/api/integrations/tiktok",{data:t})},integrationTiktokUpdate:function(t,n){return r("put","/api/integrations/tiktok/".concat(t),{data:n})},integrationTiktokDelete:function(t){return r("delete","/api/integrations/tiktok/".concat(t))},integrationsX:function(t){return r("get","/api/integrations/x",{params:t})},integrationXShow:function(t){return r("get","/api/integrations/x/".concat(t))},integrationXStore:function(t){return r("post","/api/integrations/x",{data:t})},integrationXUpdate:function(t,n){return r("put","/api/integrations/x/".concat(t),{data:n})},integrationXDelete:function(t){return r("delete","/api/integrations/x/".concat(t))},integrationsGadsConversions:function(t){return r("get","/api/integrations/gads-conversions",{params:t})},integrationGadsConversionsShow:function(t){return r("get","/api/integrations/gads-conversions/".concat(t))},integrationGadsConversionsStore:function(t){return r("post","/api/integrations/gads-conversions",{data:t})},integrationGadsConversionsUpdate:function(t,n){return r("put","/api/integrations/gads-conversions/".concat(t),{data:n})},integrationGadsConversionsDelete:function(t){return r("delete","/api/integrations/gads-conversions/".concat(t))},integrationsGoogleSheets:function(t){return r("get","/api/integrations/google-sheets",{params:t})},integrationGoogleSheetsShow:function(t){return r("get","/api/integrations/google-sheets/".concat(t))},integrationGoogleSheetsStore:function(t){return r("post","/api/integrations/google-sheets",{data:t})},integrationGoogleSheetsUpdate:function(t,n){return r("put","/api/integrations/google-sheets/".concat(t),{data:n})},integrationGoogleSheetsDelete:function(t){return r("delete","/api/integrations/google-sheets/".concat(t))},integrationsScriptBundles:function(t){return r("get","/api/integrations/script-bundles",{params:t})},integrationScriptBundlesShow:function(t){return r("get","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesStore:function(t,n){return n?r("put","/api/integrations/script-bundles/".concat(n),{data:t}):r("post","/api/integrations/script-bundles",{data:t})},integrationScriptBundlesUpdate:function(t,n){return r("put","/api/integrations/script-bundles/".concat(t),{data:n})},integrationScriptBundlesDelete:function(t){return r("delete","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesIntegrationsAccounts:function(){return r("get","/api/integrations/script-bundles/integrations-accounts")},integrationScriptBundlesJsContent:function(){return r("get","/api/integrations/script-bundles/js-content")},integrationEventsCount:function(t){return r("get","/api/integrations/events-".concat(t))},integrationsFbAdsBalances:function(t){return r("get","/api/integrations/fb-ads-balances",{params:t})},integrationFbAdsBalancesShow:function(t){return r("get","/api/integrations/fb-ads-balances/".concat(t))},integrationFbAdsBalancesStore:function(t){return r("post","/api/integrations/fb-ads-balances",{data:t})},integrationFbAdsBalancesUpdate:function(t,n){return r("put","/api/integrations/fb-ads-balances/".concat(t),{data:n})},integrationFbAdsBalancesDelete:function(t){return r("delete","/api/integrations/fb-ads-balances/".concat(t))},integrationsCsdProjects:function(t){return r("get","/api/integrations/csd-projects",{params:t})},integrationCsdProjectsShow:function(t){return r("get","/api/integrations/csd-projects/".concat(t))},integrationCsdProjectsStore:function(t){return r("post","/api/integrations/csd-projects",{data:t})},integrationCsdProjectsUpdate:function(t,n){return r("put","/api/integrations/csd-projects/".concat(t),{data:n})},integrationCsdProjectsDelete:function(t){return r("delete","/api/integrations/csd-projects/".concat(t))},integrationEvents:function(t,n){return r("get","/api/integrations/events-".concat(t,"/").concat(n))},integrationEventsCountByEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByEvents"),{params:e})},integrationEventsCountByDaysAndEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByDaysAndEvents"),{params:e})},integrationEventsList:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/list"),{params:e})}};n.Z=s},1618:function(t,n,e){e.r(n),e.d(n,{DefaultDashboard:function(){return U}});var i=e(9439),a=e(2791),r=e(1087),s=e(8302),o=e(6473),c=e(3099),u=e(7309),l=e(6106),d=e(914),p=e(1429),g=e(43),f=e(8792),h=e(2144),x=e(9286),m=e(8823),j=e(161),v=e(7286),Z=e(5447),b=e(8587),y=e(9529),S=e(5240),k=e(9771),C=e(3496),B=e(364),w=e(4685),P=e(9305),A=e(184),F=s.Z.Text,D={UA:"\u0423\u043a\u0440\u0430\u0457\u043d\u0430",US:"\u0421\u0428\u0410",DE:"\u041d\u0456\u043c\u0435\u0447\u0447\u0438\u043d\u0430",PL:"\u041f\u043e\u043b\u044c\u0449\u0430",GB:"\u0412\u0435\u043b\u0438\u043a\u0430 \u0411\u0440\u0438\u0442\u0430\u043d\u0456\u044f",FR:"\u0424\u0440\u0430\u043d\u0446\u0456\u044f",NL:"\u041d\u0456\u0434\u0435\u0440\u043b\u0430\u043d\u0434\u0438",CA:"\u041a\u0430\u043d\u0430\u0434\u0430",IT:"\u0406\u0442\u0430\u043b\u0456\u044f",ES:"\u0406\u0441\u043f\u0430\u043d\u0456\u044f",CZ:"\u0427\u0435\u0445\u0456\u044f"},I=function(t){return D[t]||t},U=function(){var t,n,e,s,D,U,T=(0,B.v9)((function(t){return t.auth.user})),N=(0,a.useState)([]),E=(0,i.Z)(N,2),G=E[0],q=E[1],X=(0,a.useState)(null),_=(0,i.Z)(X,2),L=_[0],R=_[1],z=(0,a.useState)(null),H=(0,i.Z)(z,2),O=H[0],J=H[1],K=(0,a.useState)([]),M=(0,i.Z)(K,2),W=M[0],Q=M[1],V=(0,a.useState)([]),Y=(0,i.Z)(V,2),$=Y[0],tt=Y[1],nt=(0,a.useState)(!0),et=(0,i.Z)(nt,2),it=et[0],at=et[1],rt=function(){var t=new Date;return t.setDate(t.getDate()-7),t.toISOString().slice(0,10)}(),st=(new Date).toISOString().slice(0,10);(0,a.useEffect)((function(){Promise.all([w.Z.lastNotices().then((function(t){return Array.isArray(t)?t:[]})).catch((function(){return[]})),w.Z.adminSummary({from:rt,to:st}).catch((function(){return null})),Promise.all([w.Z.integrationsFbCapi({per_page:1}).then((function(t){var n;return null!==(n=null===t||void 0===t?void 0:t.total)&&void 0!==n?n:0})),w.Z.integrationsTiktok({per_page:1}).then((function(t){var n;return null!==(n=null===t||void 0===t?void 0:t.total)&&void 0!==n?n:0})),w.Z.integrationsX({per_page:1}).then((function(t){var n;return null!==(n=null===t||void 0===t?void 0:t.total)&&void 0!==n?n:0})),w.Z.adsSources({per_page:1}).then((function(t){var n;return null!==(n=null===t||void 0===t?void 0:t.total)&&void 0!==n?n:0})),w.Z.users({per_page:1}).then((function(t){var n;return null!==(n=null===t||void 0===t?void 0:t.total)&&void 0!==n?n:0}))]).then((function(t){var n=(0,i.Z)(t,5),e=n[0],a=n[1],r=n[2],s=n[3],o=n[4];return{fbCapi:e,tiktok:a,x:r,adsSources:s,users:o,total:e+a+r+s+o}})).catch((function(){return null})),w.Z.adminRequestsByIp({from:rt,to:st}).then((function(t){return Array.isArray(t)?t:[]})).catch((function(){return[]})),w.Z.adminRequestsByCountry({from:rt,to:st}).then((function(t){return Array.isArray(t)?t:[]})).catch((function(){return[]}))]).then((function(t){var n=(0,i.Z)(t,5),e=n[0],a=n[1],r=n[2],s=n[3],o=n[4];q(e),R(a),J(r),Q(s),tt(o)})).finally((function(){return at(!1)}))}),[]);var ot=null!==(t=null===L||void 0===L||null===(n=L.requests)||void 0===n?void 0:n.data)&&void 0!==t?t:[],ct={chart:{type:"area",toolbar:{show:!1},zoom:{enabled:!1}},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{opacityFrom:.4,opacityTo:.1}},xaxis:{categories:ot.map((function(t){return t.time_step||""}))},colors:["#3e82f7"],dataLabels:{enabled:!1}},ut=[{name:"\u0417\u0430\u043f\u0438\u0442\u0438",data:ot.map((function(t){return t.all||0}))}];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{title:"\u0428\u0432\u0438\u0434\u043a\u0456 \u0434\u0456\u0457",className:"card-elevated",style:{marginBottom:24},children:(0,A.jsxs)(c.Z,{wrap:!0,children:[(0,A.jsx)(r.rU,{to:"".concat(P.sH,"/users"),children:(0,A.jsx)(u.ZP,{type:"primary",icon:(0,A.jsx)(x.Z,{}),children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"})}),(0,A.jsx)(r.rU,{to:"".concat(P.sH,"/ads-sources"),children:(0,A.jsx)(u.ZP,{icon:(0,A.jsx)(m.Z,{}),children:"\u0414\u0436\u0435\u0440\u0435\u043b\u0430 \u0434\u0430\u043d\u0438\u0445 (Ads Sources)"})}),(0,A.jsx)(r.rU,{to:"".concat(P.sH,"/integrations/fb-capi"),children:(0,A.jsx)(u.ZP,{icon:(0,A.jsx)(j.Z,{}),children:"Facebook CAPI"})}),(0,A.jsx)(r.rU,{to:"".concat(P.sH,"/integrations/tiktok"),children:(0,A.jsx)(u.ZP,{icon:(0,A.jsx)(j.Z,{}),children:"TikTok Events"})}),(0,A.jsx)(r.rU,{to:"".concat(P.sH,"/integrations/x"),children:(0,A.jsx)(u.ZP,{icon:(0,A.jsx)(j.Z,{}),children:"X Conversions"})})]})}),O&&O.total>0&&(0,A.jsx)(o.Z,{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u0456 \u0456\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0457 \u0442\u0430 \u0440\u0435\u0441\u0443\u0440\u0441\u0438",className:"card-elevated",style:{marginBottom:24},children:(0,A.jsxs)(l.Z,{gutter:[16,8],children:[(0,A.jsx)(d.Z,{span:8,children:(0,A.jsx)(p.Z,{title:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456",value:O.users})}),(0,A.jsx)(d.Z,{span:8,children:(0,A.jsx)(p.Z,{title:"Ads Sources",value:O.adsSources})}),(0,A.jsx)(d.Z,{span:8,children:(0,A.jsx)(p.Z,{title:"FB CAPI \u043f\u0456\u043a\u0441\u0435\u043b\u0456",value:O.fbCapi})}),(0,A.jsx)(d.Z,{span:8,children:(0,A.jsx)(p.Z,{title:"TikTok",value:O.tiktok})}),(0,A.jsx)(d.Z,{span:8,children:(0,A.jsx)(p.Z,{title:"X (Twitter)",value:O.x})}),(0,A.jsx)(d.Z,{span:8,children:(0,A.jsx)(p.Z,{title:"\u0412\u0441\u044c\u043e\u0433\u043e \u0437\u0430\u043f\u0438\u0441\u0456\u0432",value:O.total,prefix:(0,A.jsx)(v.Z,{})})})]})}),(0,A.jsxs)(l.Z,{gutter:[16,16],style:{marginBottom:24},children:[(0,A.jsx)(d.Z,{xs:24,sm:12,lg:6,children:(0,A.jsx)(o.Z,{className:"card-elevated",loading:it,children:(0,A.jsx)(p.Z,{title:"\u0417\u0430\u043f\u0438\u0442\u0438 (7 \u0434\u043d\u0456\u0432)",value:null!==(e=null===L||void 0===L||null===(s=L.requests)||void 0===s?void 0:s.count)&&void 0!==e?e:0,prefix:(0,A.jsx)(j.Z,{})})})}),(0,A.jsx)(d.Z,{xs:24,sm:12,lg:6,children:(0,A.jsx)(o.Z,{className:"card-elevated",loading:it,children:(0,A.jsx)(p.Z,{title:"Jobs (7 \u0434\u043d\u0456\u0432)",value:null!==(D=null===L||void 0===L||null===(U=L.jobs)||void 0===U?void 0:U.count)&&void 0!==D?D:0,prefix:(0,A.jsx)(Z.Z,{})})})}),(0,A.jsx)(d.Z,{xs:24,sm:12,lg:6,children:(0,A.jsx)(o.Z,{className:"card-elevated",children:(0,A.jsx)(p.Z,{title:"\u0421\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u043d\u044f",value:G.length,prefix:(0,A.jsx)(b.Z,{})})})}),(0,A.jsx)(d.Z,{xs:24,sm:12,lg:6,children:(0,A.jsx)(o.Z,{className:"card-elevated",children:T?(0,A.jsx)(p.Z,{title:"\u0412\u0438 \u0443\u0432\u0456\u0439\u0448\u043b\u0438 \u044f\u043a",value:T.name||T.email,valueStyle:{fontSize:16},prefix:(0,A.jsx)(y.Z,{})}):(0,A.jsx)(p.Z,{title:"\u0413\u0456\u0441\u0442\u044c",value:"\u2014"})})})]}),ot.length>0&&(0,A.jsx)(o.Z,{title:"\u0417\u0430\u043f\u0438\u0442\u0438 \u043f\u043e \u0447\u0430\u0441\u0443 (\u043e\u0441\u0442\u0430\u043d\u043d\u0456 7 \u0434\u043d\u0456\u0432)",className:"card-elevated",style:{marginBottom:24},children:(0,A.jsx)(C.Z,{options:ct,series:ut,type:"area",height:280})}),(0,A.jsx)(o.Z,{title:"\u041e\u0441\u0442\u0430\u043d\u043d\u0456 \u0441\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u043d\u044f",className:"card-elevated",children:(0,A.jsxs)(g.Z,{spinning:it,children:[0===G.length&&!it&&(0,A.jsx)("p",{style:{color:"var(--color-text-secondary)"},children:"\u041d\u0435\u043c\u0430\u0454 \u0441\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u044c."}),G.length>0&&(0,A.jsx)(f.ZP,{dataSource:G.slice(0,5),renderItem:function(t){return(0,A.jsx)(f.ZP.Item,{children:(0,A.jsx)(f.ZP.Item.Meta,{title:t.name||t.type||"\u2014",description:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(F,{type:"secondary",children:["ID: ",t.id]})," ",t.created_at&&(0,A.jsxs)(A.Fragment,{children:[", ",t.created_at]})]})})})}})]})}),(0,A.jsxs)(l.Z,{gutter:[16,16],style:{marginTop:24},children:[(0,A.jsx)(d.Z,{xs:24,lg:12,children:(0,A.jsx)(o.Z,{title:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(S.Z,{})," \u0422\u043e\u043f IP-\u0430\u0434\u0440\u0435\u0441\u0438 (\u0437\u0430\u043f\u0438\u0442\u0438 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434)"]}),className:"card-elevated",children:(0,A.jsxs)(g.Z,{spinning:it,children:[0===W.length&&!it&&(0,A.jsx)(F,{type:"secondary",children:"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445 \u043f\u043e IP."}),W.length>0&&(0,A.jsx)(h.Z,{size:"small",rowKey:"ip",dataSource:W,columns:[{title:"IP",dataIndex:"ip",key:"ip",render:function(t){return(0,A.jsx)(F,{copyable:!0,code:!0,children:t})}},{title:"\u0417\u0430\u043f\u0438\u0442\u0456\u0432",dataIndex:"count",key:"count",width:100}],pagination:{pageSize:10,hideOnSinglePage:!0}})]})})}),(0,A.jsx)(d.Z,{xs:24,lg:12,children:(0,A.jsx)(o.Z,{title:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(k.Z,{})," \u0422\u0440\u0430\u0444\u0456\u043a \u043f\u043e \u043a\u0440\u0430\u0457\u043d\u0430\u0445 (\u043e\u0440\u0456\u0454\u043d\u0442\u043e\u0432\u043d\u043e)"]}),className:"card-elevated",children:(0,A.jsxs)(g.Z,{spinning:it,children:[0===$.length&&!it&&(0,A.jsx)(F,{type:"secondary",children:"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445 \u043f\u043e \u043a\u0440\u0430\u0457\u043d\u0430\u0445. \u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0456\u0442\u044c GeoIP \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u043e\u0437\u043f\u043e\u0434\u0456\u043b\u0443."}),$.length>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:{marginBottom:16},children:(0,A.jsx)(C.Z,{options:{chart:{type:"donut"},labels:$.map((function(t){return I(t.country)})),colors:["#722ed1","#fa8c16","#eb2f96","#13c2c2","#52c41a","#1890ff","#faad14"],legend:{position:"bottom"},dataLabels:{enabled:!0}},series:$.map((function(t){return t.count})),type:"donut",height:220})}),(0,A.jsx)(h.Z,{size:"small",rowKey:"country",dataSource:$,columns:[{title:"\u041a\u0440\u0430\u0457\u043d\u0430",dataIndex:"country",key:"country",render:function(t){return I(t)}},{title:"\u0417\u0430\u043f\u0438\u0442\u0456\u0432",dataIndex:"count",key:"count",width:90}],pagination:!1})]})]})})})]}),$.length>0&&(0,A.jsx)(o.Z,{title:"\u0413\u0435\u043e\u0433\u0440\u0430\u0444\u0456\u044f \u0437\u0430\u043f\u0438\u0442\u0456\u0432 \u2014 \u0437\u0430 \u043a\u0440\u0430\u0457\u043d\u0430\u043c\u0438",className:"card-elevated",style:{marginTop:24},children:(0,A.jsx)(C.Z,{options:{chart:{type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4}},xaxis:{categories:$.map((function(t){return I(t.country)})),title:{text:"\u0417\u0430\u043f\u0438\u0442\u0456\u0432"}},yaxis:{labels:{maxWidth:120}},colors:["#1890ff"],dataLabels:{enabled:!0}},series:[{name:"\u0417\u0430\u043f\u0438\u0442\u0438",data:$.map((function(t){return t.count}))}],type:"bar",height:Math.max(200,36*$.length)})})]})};n.default=U}}]);
//# sourceMappingURL=618.20d3fe13.chunk.js.map