"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[520],{5710:function(t,n,e){e.d(n,{j3:function(){return o}});e(2791);var i=e(814),a=e(5796),r=e(184),o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.Z.confirm({title:n.title||"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438?",icon:(0,r.jsx)(a.Z,{}),content:n.content||"\u0426\u044e \u0434\u0456\u044e \u043d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438.",okText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",okType:"danger",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onOk:t})}},4685:function(t,n,e){var i=e(1413),a=e(2808),r=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.Z)((0,i.Z)({url:n.startsWith("/api")?n:"/api/".concat(n),method:t},e))},o={get:function(t,n){return r("get",t,{params:n})},post:function(t,n){return r("post",t,{data:n})},put:function(t,n){return r("put",t,{data:n})},delete:function(t){return r("delete",t)},user:function(){return r("get","/api/user")},logout:function(){return r("get","/api/logout")},adminSummary:function(t){return r("get","/api/admin",{params:t})},adminRequests:function(t){return r("get","/api/admin/requests",{params:t})},adminJobs:function(t){return r("get","/api/admin/jobs",{params:t})},adminLogs:function(t){return r("get","/api/admin/logs",{params:t})},adminTrackingUsers:function(t){return r("get","/api/admin/tracking-users",{params:t})},adminRequestsByIp:function(t){return r("get","/api/admin/requests-by-ip",{params:t})},adminRequestsByCountry:function(t){return r("get","/api/admin/requests-by-country",{params:t})},lastNotices:function(){return r("get","/api/dashboard/last-notices")},users:function(t){return r("get","/api/users",{params:t})},userShow:function(t){return r("get","/api/users/".concat(t))},userStore:function(t){return r("post","/api/users",{data:t})},userUpdate:function(t,n){return r("put","/api/users/".concat(t),{data:n})},userDelete:function(t){return r("delete","/api/users/".concat(t))},usersAll:function(){return r("get","/api/users/all")},adsSources:function(t){return r("get","/api/ads-sources",{params:t})},adsSourceShow:function(t){return r("get","/api/ads-sources/".concat(t))},adsSourceStore:function(t){return r("post","/api/ads-sources",{data:t})},adsSourceUpdate:function(t,n){return r("put","/api/ads-sources/".concat(t),{data:n})},adsSourceDelete:function(t){return r("delete","/api/ads-sources/".concat(t))},integrationsFbCapi:function(t){return r("get","/api/integrations/fb-capi",{params:t})},integrationFbCapiShow:function(t){return r("get","/api/integrations/fb-capi/".concat(t))},integrationFbCapiStore:function(t){return r("post","/api/integrations/fb-capi",{data:t})},integrationFbCapiUpdate:function(t,n){return r("put","/api/integrations/fb-capi/".concat(t),{data:n})},integrationFbCapiDelete:function(t){return r("delete","/api/integrations/fb-capi/".concat(t))},integrationsTiktok:function(t){return r("get","/api/integrations/tiktok",{params:t})},integrationTiktokShow:function(t){return r("get","/api/integrations/tiktok/".concat(t))},integrationTiktokStore:function(t){return r("post","/api/integrations/tiktok",{data:t})},integrationTiktokUpdate:function(t,n){return r("put","/api/integrations/tiktok/".concat(t),{data:n})},integrationTiktokDelete:function(t){return r("delete","/api/integrations/tiktok/".concat(t))},integrationsX:function(t){return r("get","/api/integrations/x",{params:t})},integrationXShow:function(t){return r("get","/api/integrations/x/".concat(t))},integrationXStore:function(t){return r("post","/api/integrations/x",{data:t})},integrationXUpdate:function(t,n){return r("put","/api/integrations/x/".concat(t),{data:n})},integrationXDelete:function(t){return r("delete","/api/integrations/x/".concat(t))},integrationsGadsConversions:function(t){return r("get","/api/integrations/gads-conversions",{params:t})},integrationGadsConversionsShow:function(t){return r("get","/api/integrations/gads-conversions/".concat(t))},integrationGadsConversionsStore:function(t){return r("post","/api/integrations/gads-conversions",{data:t})},integrationGadsConversionsUpdate:function(t,n){return r("put","/api/integrations/gads-conversions/".concat(t),{data:n})},integrationGadsConversionsDelete:function(t){return r("delete","/api/integrations/gads-conversions/".concat(t))},integrationsGoogleSheets:function(t){return r("get","/api/integrations/google-sheets",{params:t})},integrationGoogleSheetsShow:function(t){return r("get","/api/integrations/google-sheets/".concat(t))},integrationGoogleSheetsStore:function(t){return r("post","/api/integrations/google-sheets",{data:t})},integrationGoogleSheetsUpdate:function(t,n){return r("put","/api/integrations/google-sheets/".concat(t),{data:n})},integrationGoogleSheetsDelete:function(t){return r("delete","/api/integrations/google-sheets/".concat(t))},integrationsScriptBundles:function(t){return r("get","/api/integrations/script-bundles",{params:t})},integrationScriptBundlesShow:function(t){return r("get","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesStore:function(t,n){return n?r("put","/api/integrations/script-bundles/".concat(n),{data:t}):r("post","/api/integrations/script-bundles",{data:t})},integrationScriptBundlesUpdate:function(t,n){return r("put","/api/integrations/script-bundles/".concat(t),{data:n})},integrationScriptBundlesDelete:function(t){return r("delete","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesIntegrationsAccounts:function(){return r("get","/api/integrations/script-bundles/integrations-accounts")},integrationScriptBundlesJsContent:function(){return r("get","/api/integrations/script-bundles/js-content")},integrationEventsCount:function(t){return r("get","/api/integrations/events-".concat(t))},integrationsFbAdsBalances:function(t){return r("get","/api/integrations/fb-ads-balances",{params:t})},integrationFbAdsBalancesShow:function(t){return r("get","/api/integrations/fb-ads-balances/".concat(t))},integrationFbAdsBalancesStore:function(t){return r("post","/api/integrations/fb-ads-balances",{data:t})},integrationFbAdsBalancesUpdate:function(t,n){return r("put","/api/integrations/fb-ads-balances/".concat(t),{data:n})},integrationFbAdsBalancesDelete:function(t){return r("delete","/api/integrations/fb-ads-balances/".concat(t))},integrationsCsdProjects:function(t){return r("get","/api/integrations/csd-projects",{params:t})},integrationCsdProjectsShow:function(t){return r("get","/api/integrations/csd-projects/".concat(t))},integrationCsdProjectsStore:function(t){return r("post","/api/integrations/csd-projects",{data:t})},integrationCsdProjectsUpdate:function(t,n){return r("put","/api/integrations/csd-projects/".concat(t),{data:n})},integrationCsdProjectsDelete:function(t){return r("delete","/api/integrations/csd-projects/".concat(t))},integrationEvents:function(t,n){return r("get","/api/integrations/events-".concat(t,"/").concat(n))},integrationEventsCountByEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByEvents"),{params:e})},integrationEventsCountByDaysAndEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByDaysAndEvents"),{params:e})},integrationEventsList:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/list"),{params:e})}};n.Z=o},2520:function(t,n,e){e.r(n),e.d(n,{UserDetail:function(){return S}});var i=e(4165),a=e(5861),r=e(9439),o=e(2791),s=e(7689),c=e(43),u=e(6473),l=e(7309),d=e(3099),p=e(7174),g=e(2962),f=e(9372),m=e(1752),v=e(2622),b=e(4685),h=e(9305),x=e(5710),Z=e(1640),j=e(184),S=function(){var t,n,e,S=(0,s.UO)().id,k=(0,s.s0)(),C=(0,o.useState)(null),y=(0,r.Z)(C,2),w=y[0],B=y[1],D=(0,o.useState)(!0),U=(0,r.Z)(D,2),E=U[0],F=U[1],I=(0,o.useState)(!1),T=(0,r.Z)(I,2),A=T[0],G=T[1],P=function(){S&&(F(!0),b.Z.userShow(S).then(B).catch((function(){return B(null)})).finally((function(){return F(!1)})))};(0,o.useEffect)((function(){return P()}),[S]);return E?(0,j.jsx)(c.Z,{size:"large",style:{display:"block",margin:"48px auto"}}):w?(0,j.jsxs)("div",{children:[(0,j.jsxs)(d.Z,{style:{marginBottom:16},children:[(0,j.jsx)(l.ZP,{type:"text",icon:(0,j.jsx)(f.Z,{}),onClick:function(){return k("".concat(h.sH,"/users"))},children:"\u041d\u0430\u0437\u0430\u0434 \u0434\u043e \u0441\u043f\u0438\u0441\u043a\u0443"}),(0,j.jsx)(l.ZP,{type:"primary",icon:(0,j.jsx)(m.Z,{}),onClick:function(){return G(!0)},children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,j.jsx)(l.ZP,{danger:!0,icon:(0,j.jsx)(v.Z,{}),onClick:function(){(0,x.j3)((0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.Z.userDelete(S);case 2:k("".concat(h.sH,"/users"));case 3:case"end":return t.stop()}}),t)}))),{title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430?",content:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 ".concat((null===w||void 0===w?void 0:w.name)||(null===w||void 0===w?void 0:w.email)," \u0431\u0443\u0434\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u0438\u0439.")})},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]}),(0,j.jsx)(u.Z,{title:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",className:"card-elevated",children:(0,j.jsxs)(p.Z,{bordered:!0,column:1,size:"small",children:[(0,j.jsx)(p.Z.Item,{label:"\u0410\u0432\u0430\u0442\u0430\u0440",children:w.avatar_url?(0,j.jsx)(g.C,{src:w.avatar_url,size:64}):(0,j.jsx)(g.C,{size:64,children:(null===(t=w.name)||void 0===t?void 0:t[0])||(null===(n=w.email)||void 0===n?void 0:n[0])})}),(0,j.jsx)(p.Z.Item,{label:"ID",children:w.id}),(0,j.jsx)(p.Z.Item,{label:"\u0406\u043c'\u044f",children:w.name||"\u2014"}),(0,j.jsx)(p.Z.Item,{label:"Email",children:w.email}),(0,j.jsx)(p.Z.Item,{label:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",children:w.active?"\u0422\u0430\u043a":"\u041d\u0456"}),(0,j.jsx)(p.Z.Item,{label:"\u041f\u0440\u0430\u0432\u0430",children:(null===(e=w.permissions)||void 0===e?void 0:e.join(", "))||"\u2014"})]})}),(0,j.jsx)(Z.Z,{visible:A,onClose:function(){return G(!1)},editUser:w,onSuccess:P})]}):(0,j.jsx)(u.Z,{title:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e",children:(0,j.jsx)(l.ZP,{onClick:function(){return k("".concat(h.sH,"/users"))},children:"\u2190 \u041d\u0430\u0437\u0430\u0434 \u0434\u043e \u0441\u043f\u0438\u0441\u043a\u0443"})})};n.default=S},1640:function(t,n,e){var i=e(4165),a=e(5861),r=e(9439),o=e(2791),s=e(7615),c=e(814),u=e(177),l=e(1306),d=e(7145),p=e(4685),g=e(184),f=[{label:"\u0412\u0441\u0456 \u043f\u0440\u0430\u0432\u0430 (admin)",value:"admin"},{label:"WEB \u0406\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0457",value:"web"},{label:"Notifications",value:"notifications"},{label:"CSD",value:"csd"},{label:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456",value:"users"},{label:"Ads Sources",value:"ads-sources"}];n.Z=function(t){var n=t.visible,e=t.onClose,m=t.editUser,v=t.onSuccess,b=s.Z.useForm(),h=(0,r.Z)(b,1)[0],x=(0,o.useState)(!1),Z=(0,r.Z)(x,2),j=Z[0],S=Z[1],k=!(null===m||void 0===m||!m.id);(0,o.useEffect)((function(){var t,e,i;n&&h.setFieldsValue({name:null!==(t=null===m||void 0===m?void 0:m.name)&&void 0!==t?t:"",email:null!==(e=null===m||void 0===m?void 0:m.email)&&void 0!==e?e:"",active:0!==(null===m||void 0===m?void 0:m.active)&&!1!==(null===m||void 0===m?void 0:m.active),permissions:null!==(i=null===m||void 0===m?void 0:m.permissions)&&void 0!==i?i:[]})}),[n,m,h]);var C=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.validateFields();case 3:if(n=t.sent,S(!0),!k){t.next=10;break}return t.next=8,p.Z.userUpdate(m.id,n);case 8:t.next=12;break;case 10:return t.next=12,p.Z.userStore(n);case 12:null===v||void 0===v||v(),e(),t.next=20;break;case 16:if(t.prev=16,t.t0=t.catch(0),!t.t0.errorFields){t.next=20;break}return t.abrupt("return");case 20:return t.prev=20,S(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,16,20,23]])})));return function(){return t.apply(this,arguments)}}();return(0,g.jsx)(c.Z,{open:n,title:k?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",okText:k?"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onCancel:e,onOk:C,confirmLoading:j,destroyOnClose:!0,width:400,children:(0,g.jsxs)(s.Z,{form:h,layout:"vertical",children:[(0,g.jsx)(s.Z.Item,{name:"name",label:"\u0406\u043c'\u044f",rules:[{required:!1}],children:(0,g.jsx)(u.Z,{placeholder:"\u0406\u043c'\u044f"})}),(0,g.jsx)(s.Z.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:(0,g.jsx)(u.Z,{placeholder:"email@example.com",disabled:k})}),(0,g.jsx)(s.Z.Item,{name:"active",label:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",valuePropName:"checked",children:(0,g.jsx)(l.Z,{})}),(0,g.jsx)(s.Z.Item,{name:"permissions",label:"\u041f\u0440\u0430\u0432\u0430",children:(0,g.jsx)(d.Z,{mode:"multiple",options:f,placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u0440\u0430\u0432\u0430",allowClear:!0})})]})})}}}]);
//# sourceMappingURL=520.3107f08f.chunk.js.map