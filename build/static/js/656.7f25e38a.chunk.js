"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[656],{5710:function(t,n,e){e.d(n,{j3:function(){return o}});e(2791);var i=e(814),a=e(5796),r=e(184),o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.Z.confirm({title:n.title||"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438?",icon:(0,r.jsx)(a.Z,{}),content:n.content||"\u0426\u044e \u0434\u0456\u044e \u043d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438.",okText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",okType:"danger",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onOk:t})}},4685:function(t,n,e){var i=e(1413),a=e(2808),r=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.Z)((0,i.Z)({url:n.startsWith("/api")?n:"/api/".concat(n),method:t},e))},o={get:function(t,n){return r("get",t,{params:n})},post:function(t,n){return r("post",t,{data:n})},put:function(t,n){return r("put",t,{data:n})},delete:function(t){return r("delete",t)},user:function(){return r("get","/api/user")},logout:function(){return r("get","/api/logout")},adminSummary:function(t){return r("get","/api/admin",{params:t})},adminRequests:function(t){return r("get","/api/admin/requests",{params:t})},adminJobs:function(t){return r("get","/api/admin/jobs",{params:t})},adminLogs:function(t){return r("get","/api/admin/logs",{params:t})},adminTrackingUsers:function(t){return r("get","/api/admin/tracking-users",{params:t})},adminRequestsByIp:function(t){return r("get","/api/admin/requests-by-ip",{params:t})},adminRequestsByCountry:function(t){return r("get","/api/admin/requests-by-country",{params:t})},lastNotices:function(){return r("get","/api/dashboard/last-notices")},users:function(t){return r("get","/api/users",{params:t})},userShow:function(t){return r("get","/api/users/".concat(t))},userStore:function(t){return r("post","/api/users",{data:t})},userUpdate:function(t,n){return r("put","/api/users/".concat(t),{data:n})},userDelete:function(t){return r("delete","/api/users/".concat(t))},usersAll:function(){return r("get","/api/users/all")},adsSources:function(t){return r("get","/api/ads-sources",{params:t})},adsSourceShow:function(t){return r("get","/api/ads-sources/".concat(t))},adsSourceStore:function(t){return r("post","/api/ads-sources",{data:t})},adsSourceUpdate:function(t,n){return r("put","/api/ads-sources/".concat(t),{data:n})},adsSourceDelete:function(t){return r("delete","/api/ads-sources/".concat(t))},integrationsFbCapi:function(t){return r("get","/api/integrations/fb-capi",{params:t})},integrationFbCapiShow:function(t){return r("get","/api/integrations/fb-capi/".concat(t))},integrationFbCapiStore:function(t){return r("post","/api/integrations/fb-capi",{data:t})},integrationFbCapiUpdate:function(t,n){return r("put","/api/integrations/fb-capi/".concat(t),{data:n})},integrationFbCapiDelete:function(t){return r("delete","/api/integrations/fb-capi/".concat(t))},integrationsTiktok:function(t){return r("get","/api/integrations/tiktok",{params:t})},integrationTiktokShow:function(t){return r("get","/api/integrations/tiktok/".concat(t))},integrationTiktokStore:function(t){return r("post","/api/integrations/tiktok",{data:t})},integrationTiktokUpdate:function(t,n){return r("put","/api/integrations/tiktok/".concat(t),{data:n})},integrationTiktokDelete:function(t){return r("delete","/api/integrations/tiktok/".concat(t))},integrationsX:function(t){return r("get","/api/integrations/x",{params:t})},integrationXShow:function(t){return r("get","/api/integrations/x/".concat(t))},integrationXStore:function(t){return r("post","/api/integrations/x",{data:t})},integrationXUpdate:function(t,n){return r("put","/api/integrations/x/".concat(t),{data:n})},integrationXDelete:function(t){return r("delete","/api/integrations/x/".concat(t))},integrationsGadsConversions:function(t){return r("get","/api/integrations/gads-conversions",{params:t})},integrationGadsConversionsShow:function(t){return r("get","/api/integrations/gads-conversions/".concat(t))},integrationGadsConversionsStore:function(t){return r("post","/api/integrations/gads-conversions",{data:t})},integrationGadsConversionsUpdate:function(t,n){return r("put","/api/integrations/gads-conversions/".concat(t),{data:n})},integrationGadsConversionsDelete:function(t){return r("delete","/api/integrations/gads-conversions/".concat(t))},integrationsGoogleSheets:function(t){return r("get","/api/integrations/google-sheets",{params:t})},integrationGoogleSheetsShow:function(t){return r("get","/api/integrations/google-sheets/".concat(t))},integrationGoogleSheetsStore:function(t){return r("post","/api/integrations/google-sheets",{data:t})},integrationGoogleSheetsUpdate:function(t,n){return r("put","/api/integrations/google-sheets/".concat(t),{data:n})},integrationGoogleSheetsDelete:function(t){return r("delete","/api/integrations/google-sheets/".concat(t))},integrationsScriptBundles:function(t){return r("get","/api/integrations/script-bundles",{params:t})},integrationScriptBundlesShow:function(t){return r("get","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesStore:function(t,n){return n?r("put","/api/integrations/script-bundles/".concat(n),{data:t}):r("post","/api/integrations/script-bundles",{data:t})},integrationScriptBundlesUpdate:function(t,n){return r("put","/api/integrations/script-bundles/".concat(t),{data:n})},integrationScriptBundlesDelete:function(t){return r("delete","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesIntegrationsAccounts:function(){return r("get","/api/integrations/script-bundles/integrations-accounts")},integrationScriptBundlesJsContent:function(){return r("get","/api/integrations/script-bundles/js-content")},integrationEventsCount:function(t){return r("get","/api/integrations/events-".concat(t))},integrationsFbAdsBalances:function(t){return r("get","/api/integrations/fb-ads-balances",{params:t})},integrationFbAdsBalancesShow:function(t){return r("get","/api/integrations/fb-ads-balances/".concat(t))},integrationFbAdsBalancesStore:function(t){return r("post","/api/integrations/fb-ads-balances",{data:t})},integrationFbAdsBalancesUpdate:function(t,n){return r("put","/api/integrations/fb-ads-balances/".concat(t),{data:n})},integrationFbAdsBalancesDelete:function(t){return r("delete","/api/integrations/fb-ads-balances/".concat(t))},integrationsCsdProjects:function(t){return r("get","/api/integrations/csd-projects",{params:t})},integrationCsdProjectsShow:function(t){return r("get","/api/integrations/csd-projects/".concat(t))},integrationCsdProjectsStore:function(t){return r("post","/api/integrations/csd-projects",{data:t})},integrationCsdProjectsUpdate:function(t,n){return r("put","/api/integrations/csd-projects/".concat(t),{data:n})},integrationCsdProjectsDelete:function(t){return r("delete","/api/integrations/csd-projects/".concat(t))},integrationEvents:function(t,n){return r("get","/api/integrations/events-".concat(t,"/").concat(n))},integrationEventsCountByEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByEvents"),{params:e})},integrationEventsCountByDaysAndEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByDaysAndEvents"),{params:e})},integrationEventsList:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/list"),{params:e})}};n.Z=o},8656:function(t,n,e){e.r(n),e.d(n,{FbCApi:function(){return S}});var i=e(4165),a=e(5861),r=e(9439),o=e(2791),s=e(7689),c=e(3099),u=e(7309),l=e(6473),d=e(43),p=e(2144),g=e(1752),f=e(2622),v=e(9286),m=e(4685),b=e(9305),x=e(5710),h=e(7958),k=e(184),S=function(){var t=(0,s.s0)(),n=(0,o.useState)({data:[],total:0}),e=(0,r.Z)(n,2),S=e[0],Z=e[1],j=(0,o.useState)(!0),C=(0,r.Z)(j,2),y=C[0],F=C[1],w=(0,o.useState)(1),A=(0,r.Z)(w,2),I=A[0],D=A[1],U=(0,o.useState)(!1),B=(0,r.Z)(U,2),P=B[0],E=B[1],T=(0,o.useState)(null),_=(0,r.Z)(T,2),G=_[0],q=_[1],R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;F(!0),m.Z.integrationsFbCapi({page:t,per_page:20}).then((function(t){var n;return Z({data:Array.isArray(null===t||void 0===t?void 0:t.data)?t.data:[],total:null!==(n=null===t||void 0===t?void 0:t.total)&&void 0!==n?n:0})})).catch((function(){return Z({data:[],total:0})})).finally((function(){return F(!1)}))};(0,o.useEffect)((function(){return R()}),[I]);var X=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"\u041d\u0430\u0437\u0432\u0430",dataIndex:"name",key:"name"},{title:"Pixel ID",dataIndex:"pixel_id",key:"pixel_id",ellipsis:!0},{title:"",key:"actions",width:100,render:function(t,n){return(0,k.jsxs)(c.Z,{onClick:function(t){return t.stopPropagation()},children:[(0,k.jsx)(u.ZP,{type:"text",size:"small",icon:(0,k.jsx)(g.Z,{}),onClick:function(){q(n),E(!0)}}),(0,k.jsx)(u.ZP,{type:"text",size:"small",danger:!0,icon:(0,k.jsx)(f.Z,{}),onClick:function(t){return function(t,n){var e;null===n||void 0===n||null===(e=n.stopPropagation)||void 0===e||e.call(n),(0,x.j3)((0,a.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.Z.integrationFbCapiDelete(t.id);case 2:R(1),1!==I&&D(1);case 4:case"end":return n.stop()}}),n)}))),{content:'\u041f\u0456\u043a\u0441\u0435\u043b\u044c "'.concat(t.name,'" \u0431\u0443\u0434\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e.')})}(n,t)}})]})}}];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.Z,{title:"Facebook Conversions API",extra:(0,k.jsx)(u.ZP,{type:"primary",icon:(0,k.jsx)(v.Z,{}),onClick:function(){q(null),E(!0)},children:"\u0414\u043e\u0434\u0430\u0442\u0438"}),children:(0,k.jsx)(d.Z,{spinning:y,children:(0,k.jsx)(p.Z,{rowKey:"id",columns:X,dataSource:S.data,onRow:function(n){return{style:{cursor:"pointer"},onClick:function(){return t("".concat(b.sH,"/integrations/").concat("fb-capi","/").concat(n.id))}}},pagination:{total:S.total,pageSize:20,current:I,onChange:D}})})}),(0,k.jsx)(h.Z,{visible:P,onClose:function(){E(!1),q(null)},editItem:G,onSuccess:function(){R(1),1!==I&&D(1)}})]})};n.default=S},7958:function(t,n,e){var i=e(4165),a=e(5861),r=e(9439),o=e(2791),s=e(7615),c=e(814),u=e(177),l=e(7145),d=e(1306),p=e(4685),g=e(184),f=[{label:"USD",value:"USD"},{label:"EUR",value:"EUR"},{label:"UAH",value:"UAH"}];n.Z=function(t){var n=t.visible,e=t.onClose,v=t.editItem,m=t.onSuccess,b=s.Z.useForm(),x=(0,r.Z)(b,1)[0],h=(0,o.useState)(!1),k=(0,r.Z)(h,2),S=k[0],Z=k[1],j=(0,o.useState)([]),C=(0,r.Z)(j,2),y=C[0],F=C[1],w=!(null===v||void 0===v||!v.id);(0,o.useEffect)((function(){var t,e,i,a,r;n&&(p.Z.usersAll().then((function(t){return F(Array.isArray(t)?t:[])})),x.setFieldsValue({name:null!==(t=null===v||void 0===v?void 0:v.name)&&void 0!==t?t:"",pixel_id:null!==(e=null===v||void 0===v?void 0:v.pixel_id)&&void 0!==e?e:"",access_token:null!==(i=null===v||void 0===v?void 0:v.access_token)&&void 0!==i?i:"",currency:null!==(a=null===v||void 0===v?void 0:v.currency)&&void 0!==a?a:"USD",user_id:null!==(r=null===v||void 0===v?void 0:v.user_id)&&void 0!==r?r:void 0,active:0!==(null===v||void 0===v?void 0:v.active)&&!1!==(null===v||void 0===v?void 0:v.active),testing:!(null===v||void 0===v||!v.testing)}))}),[n,v,x]);var A=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.validateFields();case 3:if(n=t.sent,Z(!0),!w){t.next=10;break}return t.next=8,p.Z.integrationFbCapiUpdate(v.id,n);case 8:t.next=12;break;case 10:return t.next=12,p.Z.integrationFbCapiStore(n);case 12:null===m||void 0===m||m(),e(),t.next=20;break;case 16:if(t.prev=16,t.t0=t.catch(0),!t.t0.errorFields){t.next=20;break}return t.abrupt("return");case 20:return t.prev=20,Z(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,16,20,23]])})));return function(){return t.apply(this,arguments)}}(),I=y.map((function(t){return{label:t.name||t.email,value:t.id}}));return(0,g.jsx)(c.Z,{open:n,title:w?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 Facebook CAPI":"\u0414\u043e\u0434\u0430\u0442\u0438 Facebook Conversions API",okText:w?"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onCancel:e,onOk:A,confirmLoading:S,destroyOnClose:!0,width:480,children:(0,g.jsxs)(s.Z,{form:x,layout:"vertical",children:[(0,g.jsx)(s.Z.Item,{name:"name",label:"\u041d\u0430\u0437\u0432\u0430",rules:[{required:!0}],children:(0,g.jsx)(u.Z,{placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043f\u0456\u043a\u0441\u0435\u043b\u044f"})}),(0,g.jsx)(s.Z.Item,{name:"pixel_id",label:"Pixel ID",rules:[{required:!0}],children:(0,g.jsx)(u.Z,{placeholder:"Facebook Pixel ID"})}),(0,g.jsx)(s.Z.Item,{name:"access_token",label:"Access Token",rules:[{required:!0}],children:(0,g.jsx)(u.Z.TextArea,{rows:3,placeholder:"\u0422\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0443"})}),(0,g.jsx)(s.Z.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430",children:(0,g.jsx)(l.Z,{options:f})}),(0,g.jsx)(s.Z.Item,{name:"user_id",label:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447",children:(0,g.jsx)(l.Z,{allowClear:!0,options:I,placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c"})}),(0,g.jsx)(s.Z.Item,{name:"active",label:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",valuePropName:"checked",children:(0,g.jsx)(d.Z,{})}),(0,g.jsx)(s.Z.Item,{name:"testing",label:"\u0422\u0435\u0441\u0442\u043e\u0432\u0438\u0439 \u0440\u0435\u0436\u0438\u043c",valuePropName:"checked",children:(0,g.jsx)(d.Z,{})})]})})}}}]);
//# sourceMappingURL=656.7f25e38a.chunk.js.map