"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[321],{5710:function(t,e,n){n.d(e,{j3:function(){return c}});n(2791);var r=n(814),a=n(5796),i=n(184),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.Z.confirm({title:e.title||"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438?",icon:(0,i.jsx)(a.Z,{}),content:e.content||"\u0426\u044e \u0434\u0456\u044e \u043d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438.",okText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",okType:"danger",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onOk:t})}},3776:function(t,e,n){var r=n(4165),a=n(5861),i=n(9439),c=n(2791),o=n(7615),l=n(814),s=n(177),u=n(7145),d=n(1306),f=n(4685),h=n(184),x=[{value:"default",label:"\u0417\u0432\u0438\u0447\u0430\u0439\u043d\u0438\u0439"},{value:"first-last",label:"First last utms"}],p=function(t){return t?String(t).charAt(0).toUpperCase()+String(t).slice(1):""};e.Z=function(t){var e=t.visible,n=t.onClose,Z=t.editItem,v=t.onSuccess,m=o.Z.useForm(),g=(0,i.Z)(m,1)[0],j=(0,c.useState)(!1),k=(0,i.Z)(j,2),y=k[0],b=k[1],S=(0,c.useState)(null),C=(0,i.Z)(S,2),T=C[0],w=C[1],P=!(null===Z||void 0===Z||!Z.id);(0,c.useEffect)((function(){e&&f.Z.integrationScriptBundlesIntegrationsAccounts().then((function(t){return w(t||{})})).catch((function(){return w({})}))}),[e]),(0,c.useEffect)((function(){var t;e&&Z?g.setFieldsValue({name:null!==(t=Z.name)&&void 0!==t?t:"",active:!1!==Z.active&&0!==Z.active,utm:Z.utm||void 0,integrations:Z.integrations||{}}):e&&!Z&&g.setFieldsValue({name:"",active:!0,utm:void 0,integrations:{}})}),[e,Z,g]);var z=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.validateFields();case 3:return e=t.sent,a=e.integrations||{},Object.keys(a).forEach((function(t){null!=a[t]&&""!==a[t]||delete a[t]})),b(!0),t.next=9,f.Z.integrationScriptBundlesStore({name:e.name,active:e.active,utm:e.utm,integrations:a},null===Z||void 0===Z?void 0:Z.id);case 9:null===v||void 0===v||v(),n(),t.next=17;break;case 13:if(t.prev=13,t.t0=t.catch(0),!t.t0.errorFields){t.next=17;break}return t.abrupt("return");case 17:return t.prev=17,b(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,13,17,20]])})));return function(){return t.apply(this,arguments)}}(),A=T?Object.keys(T):[];return(0,h.jsx)(l.Z,{open:e,title:P?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0431\u0430\u043d\u0434\u043b":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0431\u0430\u043d\u0434\u043b",okText:P?"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onCancel:n,onOk:z,confirmLoading:y,destroyOnClose:!0,width:480,children:(0,h.jsxs)(o.Z,{form:g,layout:"vertical",children:[(0,h.jsx)(o.Z.Item,{name:"name",label:"\u041d\u0430\u0437\u0432\u0430",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443"}],children:(0,h.jsx)(s.Z,{placeholder:"\u041d\u0430\u0437\u0432\u0430 \u0431\u0430\u043d\u0434\u043b\u0430"})}),A.length>0&&(0,h.jsx)(o.Z.Item,{label:"\u0406\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0457",style:{marginBottom:8},children:A.map((function(t){return(0,h.jsx)(o.Z.Item,{name:["integrations",t],label:p(t),style:{marginBottom:8},children:(0,h.jsx)(u.Z,{allowClear:!0,placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c ".concat(p(t)),options:(T[t]||[]).map((function(t){return{label:"#".concat(t.id," ").concat(t.name),value:t.id}}))})},t)}))}),(0,h.jsx)(o.Z.Item,{name:"utm",label:"UTM",children:(0,h.jsx)(u.Z,{allowClear:!0,options:x,placeholder:"\u0417\u0432\u0438\u0447\u0430\u0439\u043d\u0438\u0439"})}),(0,h.jsx)(o.Z.Item,{name:"active",label:"\u0423\u0432\u0456\u043c\u043a\u043d\u0435\u043d\u043e",valuePropName:"checked",children:(0,h.jsx)(d.Z,{})})]})})}},8321:function(t,e,n){n.r(e),n.d(e,{ScriptBundles:function(){return I}});var r=n(4165),a=n(5861),i=n(9439),c=n(2791),o=n(7689),l=n(3099),s=n(2339),u=n(8302),d=n(7309),f=n(6473),h=n(43),x=n(2144),p=n(814),Z=n(177),v=n(3605),m=n(1752),g=n(8823),j=n(2622),k=n(8622),y=n(9286),b=n(4685),S=n(9305),C=n(5710),T=n(3776),w=n(184),P={facebookPixel:{path:"fb-capi",label:"Facebook CAPI"},googleAdsAccount:{path:"gads-conversions",label:"Google Ads"},googleSheetAccount:{path:"google-sheets",label:"Google Sheets"},xPixel:{path:"x",label:"X"},tikTokPixel:{path:"tiktok",label:"TikTok"}},z={default:"\u0417\u0432\u0438\u0447\u0430\u0439\u043d\u0438\u0439","first-last":"First Last"},A=(S.CT||"").replace(/\/api\/?$/,""),I=function(){var t=(0,o.s0)(),e=(0,c.useState)({data:[],total:0}),n=(0,i.Z)(e,2),I=n[0],B=n[1],E=(0,c.useState)(!0),F=(0,i.Z)(E,2),O=F[0],L=F[1],V=(0,c.useState)(1),M=(0,i.Z)(V,2),N=M[0],R=M[1],D=(0,c.useState)(!1),G=(0,i.Z)(D,2),H=G[0],U=G[1],X=(0,c.useState)(null),_=(0,i.Z)(X,2),q=_[0],J=_[1],K=(0,c.useState)(null),W=(0,i.Z)(K,2),$=W[0],Q=W[1],Y=(0,c.useState)(""),tt=(0,i.Z)(Y,2),et=tt[0],nt=tt[1],rt=(0,c.useState)({}),at=(0,i.Z)(rt,2),it=at[0],ct=at[1],ot=(0,c.useState)(!1),lt=(0,i.Z)(ot,2),st=lt[0],ut=lt[1],dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;L(!0),b.Z.integrationsScriptBundles({page:t,per_page:20}).then((function(t){var e;return B({data:Array.isArray(null===t||void 0===t?void 0:t.data)?t.data:[],total:null!==(e=null===t||void 0===t?void 0:t.total)&&void 0!==e?e:0})})).catch((function(){return B({data:[],total:0})})).finally((function(){return L(!1)}))};(0,c.useEffect)((function(){return dt()}),[N]),(0,c.useEffect)((function(){$&&b.Z.integrationScriptBundlesJsContent().then((function(t){return nt((null===t||void 0===t?void 0:t.data)||"")})).catch((function(){return nt("")}))}),[$]),(0,c.useEffect)((function(){ut(!0),Promise.all([b.Z.integrationEventsCount("fb").catch((function(){return{}})),b.Z.integrationEventsCount("tiktok").catch((function(){return{}})),b.Z.integrationEventsCount("x").catch((function(){return{}})),b.Z.integrationEventsCount("gads").catch((function(){return{}}))]).then((function(t){var e=(0,i.Z)(t,4),n=e[0],r=e[1],a=e[2],c=e[3];return ct({fb:n||{},tiktok:r||{},x:a||{},gads:c||{}})})).catch((function(){return ct({})})).finally((function(){return ut(!1)}))}),[]);var ft=[{title:"ID",dataIndex:"id",key:"id",width:70},{title:"\u041d\u0430\u0437\u0432\u0430",dataIndex:"name",key:"name",render:function(t,e){return(0,w.jsxs)(u.Z.Text,{style:e.active?{}:{color:"var(--color-error)"},children:[t||"\u2014",!e.active&&" (\u043d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u0438\u0439)"]})}},{title:"\u0406\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0457",dataIndex:"integrations",key:"integrations",render:function(e){return e&&"object"===typeof e?(0,w.jsx)(l.Z,{wrap:!0,size:[4,4],children:Object.entries(e).map((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1],c=P[r];return c&&null!=a?(0,w.jsx)(s.Z,{children:(0,w.jsxs)("a",{href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation(),t("".concat(S.sH,"/integrations/").concat(c.path,"/").concat(a))},children:[c.label," #",a]})},r):(0,w.jsx)(s.Z,{children:r},r)}))}):"\u2014"}},{title:"UTM",dataIndex:"utm",key:"utm",width:120,render:function(t){return z[t]||"\u2014"}},{title:"",key:"actions",width:180,render:function(t,e){return(0,w.jsxs)(l.Z,{onClick:function(t){return t.stopPropagation()},children:[(0,w.jsx)(d.ZP,{type:"text",size:"small",icon:(0,w.jsx)(v.Z,{}),title:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0441\u043a\u0440\u0438\u043f\u0442",onClick:function(t){return function(t,e){var n;null===e||void 0===e||null===(n=e.stopPropagation)||void 0===n||n.call(e),b.Z.integrationScriptBundlesStore({},t.id).then((function(){return dt()}))}(e,t)}}),(0,w.jsx)(d.ZP,{type:"text",size:"small",icon:(0,w.jsx)(m.Z,{}),onClick:function(){J(e),U(!0)}}),(0,w.jsx)(d.ZP,{type:"text",size:"small",icon:(0,w.jsx)(g.Z,{}),onClick:function(t){t.stopPropagation(),Q(e)},children:"\u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f"}),(0,w.jsx)(d.ZP,{type:"text",size:"small",danger:!0,icon:(0,w.jsx)(j.Z,{}),onClick:function(t){return function(t,e){var n;null===e||void 0===e||null===(n=e.stopPropagation)||void 0===n||n.call(e),(0,C.j3)((0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.integrationScriptBundlesDelete(t.id);case 2:dt(1),1!==N&&R(1);case 4:case"end":return e.stop()}}),e)}))),{content:"\u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u0435\u0439 \u0431\u0430\u043d\u0434\u043b?"})}(e,t)}})]})}}],ht=$&&A?"".concat(A,"/partners/js/bundle-").concat($.id,".js"):"",xt=$&&A?"".concat(A,"/partners/callback/").concat($.id):"",pt=et&&$?et.replace("id",String($.id)):"",Zt=function(t){return t&&"object"===typeof t?Object.values(t).reduce((function(t,e){return t+(e||0)}),0):0};return(0,w.jsxs)(w.Fragment,{children:[Object.keys(it).length>0&&(0,w.jsx)(f.Z,{title:(0,w.jsxs)(l.Z,{children:[(0,w.jsx)(k.Z,{}),"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e CAPI (\u043f\u043e\u0434\u0456\u0457 \u043f\u043e \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430\u0445)"]}),className:"card-elevated",style:{marginBottom:24},children:(0,w.jsx)(h.Z,{spinning:st,children:(0,w.jsxs)(l.Z,{wrap:!0,size:"middle",children:[(0,w.jsx)(u.Z.Text,{strong:!0,children:"Facebook CAPI:"}),(0,w.jsxs)(u.Z.Text,{children:[Zt(it.fb)," \u043f\u043e\u0434\u0456\u0439"]}),(0,w.jsx)(u.Z.Text,{type:"secondary",children:"|"}),(0,w.jsx)(u.Z.Text,{strong:!0,children:"TikTok:"}),(0,w.jsxs)(u.Z.Text,{children:[Zt(it.tiktok)," \u043f\u043e\u0434\u0456\u0439"]}),(0,w.jsx)(u.Z.Text,{type:"secondary",children:"|"}),(0,w.jsx)(u.Z.Text,{strong:!0,children:"X (Twitter):"}),(0,w.jsxs)(u.Z.Text,{children:[Zt(it.x)," \u043f\u043e\u0434\u0456\u0439"]}),(0,w.jsx)(u.Z.Text,{type:"secondary",children:"|"}),(0,w.jsx)(u.Z.Text,{strong:!0,children:"Google Ads:"}),(0,w.jsxs)(u.Z.Text,{children:[Zt(it.gads)," \u043f\u043e\u0434\u0456\u0439"]})]})})}),(0,w.jsx)(f.Z,{title:"\u0411\u0430\u043d\u0434\u043b\u0438 \u0441\u043a\u0440\u0438\u043f\u0442\u0456\u0432 \u0456\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0439 (".concat(I.total,")"),extra:(0,w.jsx)(d.ZP,{type:"primary",icon:(0,w.jsx)(y.Z,{}),onClick:function(){J(null),U(!0)},children:"\u0414\u043e\u0434\u0430\u0442\u0438"}),children:(0,w.jsx)(h.Z,{spinning:O,children:(0,w.jsx)(x.Z,{rowKey:"id",columns:ft,dataSource:I.data,onRow:function(e){return{style:{cursor:"pointer"},onClick:function(){return t("".concat(S.sH,"/integrations/script-bundles/").concat(e.id))}}},pagination:{total:I.total,pageSize:20,current:N,onChange:R}})})}),(0,w.jsx)(T.Z,{visible:H,onClose:function(){U(!1),J(null)},editItem:q,onSuccess:function(){dt(1),1!==N&&R(1)}}),(0,w.jsx)(p.Z,{open:!!$,onCancel:function(){return Q(null)},title:"\u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f \u0456\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0457",footer:null,width:560,children:$&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{children:"\u0420\u043e\u0437\u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u0441\u043a\u0440\u0438\u043f\u0442 \u0432 \u0431\u043b\u043e\u0446\u0456 head:"}),(0,w.jsx)(u.Z.Link,{href:ht,target:"_blank",rel:"noopener noreferrer",children:ht}),(0,w.jsx)(Z.Z.TextArea,{readOnly:!0,value:pt||(ht?'<script src="'.concat(ht,'"><\/script>'):""),rows:3,style:{marginTop:8,fontFamily:"monospace",fontSize:12}}),(0,w.jsx)("p",{style:{marginTop:16},children:"Postback/Webhook \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u0438 \u043d\u0430 \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f:"}),(0,w.jsx)(Z.Z.TextArea,{readOnly:!0,value:xt,rows:1,style:{fontFamily:"monospace",fontSize:12}})]})})]})};e.default=I},8622:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(1413),a=n(2791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},c=n(8711),o=function(t,e){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},t),{},{ref:e,icon:i}))};o.displayName="BarChartOutlined";var l=a.forwardRef(o)},8823:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(1413),a=n(2791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},c=n(8711),o=function(t,e){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},t),{},{ref:e,icon:i}))};o.displayName="LinkOutlined";var l=a.forwardRef(o)},3605:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(1413),a=n(2791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},c=n(8711),o=function(t,e){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},t),{},{ref:e,icon:i}))};o.displayName="ReloadOutlined";var l=a.forwardRef(o)}}]);
//# sourceMappingURL=321.640a5edb.chunk.js.map