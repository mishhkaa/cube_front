"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[543],{5710:function(t,n,e){e.d(n,{j3:function(){return o}});e(2791);var i=e(814),a=e(5796),r=e(184),o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.Z.confirm({title:n.title||"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438?",icon:(0,r.jsx)(a.Z,{}),content:n.content||"\u0426\u044e \u0434\u0456\u044e \u043d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438.",okText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",okType:"danger",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onOk:t})}},4685:function(t,n,e){var i=e(1413),a=e(2808),r=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.Z)((0,i.Z)({url:n.startsWith("/api")?n:"/api/".concat(n),method:t},e))},o={get:function(t,n){return r("get",t,{params:n})},post:function(t,n){return r("post",t,{data:n})},put:function(t,n){return r("put",t,{data:n})},delete:function(t){return r("delete",t)},user:function(){return r("get","/api/user")},logout:function(){return r("get","/api/logout")},adminSummary:function(t){return r("get","/api/admin",{params:t})},adminRequests:function(t){return r("get","/api/admin/requests",{params:t})},adminJobs:function(t){return r("get","/api/admin/jobs",{params:t})},adminLogs:function(t){return r("get","/api/admin/logs",{params:t})},adminTrackingUsers:function(t){return r("get","/api/admin/tracking-users",{params:t})},adminRequestsByIp:function(t){return r("get","/api/admin/requests-by-ip",{params:t})},adminRequestsByCountry:function(t){return r("get","/api/admin/requests-by-country",{params:t})},lastNotices:function(){return r("get","/api/dashboard/last-notices")},users:function(t){return r("get","/api/users",{params:t})},userShow:function(t){return r("get","/api/users/".concat(t))},userStore:function(t){return r("post","/api/users",{data:t})},userUpdate:function(t,n){return r("put","/api/users/".concat(t),{data:n})},userDelete:function(t){return r("delete","/api/users/".concat(t))},usersAll:function(){return r("get","/api/users/all")},adsSources:function(t){return r("get","/api/ads-sources",{params:t})},adsSourceShow:function(t){return r("get","/api/ads-sources/".concat(t))},adsSourceStore:function(t){return r("post","/api/ads-sources",{data:t})},adsSourceUpdate:function(t,n){return r("put","/api/ads-sources/".concat(t),{data:n})},adsSourceDelete:function(t){return r("delete","/api/ads-sources/".concat(t))},integrationsFbCapi:function(t){return r("get","/api/integrations/fb-capi",{params:t})},integrationFbCapiShow:function(t){return r("get","/api/integrations/fb-capi/".concat(t))},integrationFbCapiStore:function(t){return r("post","/api/integrations/fb-capi",{data:t})},integrationFbCapiUpdate:function(t,n){return r("put","/api/integrations/fb-capi/".concat(t),{data:n})},integrationFbCapiDelete:function(t){return r("delete","/api/integrations/fb-capi/".concat(t))},integrationsTiktok:function(t){return r("get","/api/integrations/tiktok",{params:t})},integrationTiktokShow:function(t){return r("get","/api/integrations/tiktok/".concat(t))},integrationTiktokStore:function(t){return r("post","/api/integrations/tiktok",{data:t})},integrationTiktokUpdate:function(t,n){return r("put","/api/integrations/tiktok/".concat(t),{data:n})},integrationTiktokDelete:function(t){return r("delete","/api/integrations/tiktok/".concat(t))},integrationsX:function(t){return r("get","/api/integrations/x",{params:t})},integrationXShow:function(t){return r("get","/api/integrations/x/".concat(t))},integrationXStore:function(t){return r("post","/api/integrations/x",{data:t})},integrationXUpdate:function(t,n){return r("put","/api/integrations/x/".concat(t),{data:n})},integrationXDelete:function(t){return r("delete","/api/integrations/x/".concat(t))},integrationsGadsConversions:function(t){return r("get","/api/integrations/gads-conversions",{params:t})},integrationGadsConversionsShow:function(t){return r("get","/api/integrations/gads-conversions/".concat(t))},integrationGadsConversionsStore:function(t){return r("post","/api/integrations/gads-conversions",{data:t})},integrationGadsConversionsUpdate:function(t,n){return r("put","/api/integrations/gads-conversions/".concat(t),{data:n})},integrationGadsConversionsDelete:function(t){return r("delete","/api/integrations/gads-conversions/".concat(t))},integrationsGoogleSheets:function(t){return r("get","/api/integrations/google-sheets",{params:t})},integrationGoogleSheetsShow:function(t){return r("get","/api/integrations/google-sheets/".concat(t))},integrationGoogleSheetsStore:function(t){return r("post","/api/integrations/google-sheets",{data:t})},integrationGoogleSheetsUpdate:function(t,n){return r("put","/api/integrations/google-sheets/".concat(t),{data:n})},integrationGoogleSheetsDelete:function(t){return r("delete","/api/integrations/google-sheets/".concat(t))},integrationsScriptBundles:function(t){return r("get","/api/integrations/script-bundles",{params:t})},integrationScriptBundlesShow:function(t){return r("get","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesStore:function(t,n){return n?r("put","/api/integrations/script-bundles/".concat(n),{data:t}):r("post","/api/integrations/script-bundles",{data:t})},integrationScriptBundlesUpdate:function(t,n){return r("put","/api/integrations/script-bundles/".concat(t),{data:n})},integrationScriptBundlesDelete:function(t){return r("delete","/api/integrations/script-bundles/".concat(t))},integrationScriptBundlesIntegrationsAccounts:function(){return r("get","/api/integrations/script-bundles/integrations-accounts")},integrationScriptBundlesJsContent:function(){return r("get","/api/integrations/script-bundles/js-content")},integrationEventsCount:function(t){return r("get","/api/integrations/events-".concat(t))},integrationsFbAdsBalances:function(t){return r("get","/api/integrations/fb-ads-balances",{params:t})},integrationFbAdsBalancesShow:function(t){return r("get","/api/integrations/fb-ads-balances/".concat(t))},integrationFbAdsBalancesStore:function(t){return r("post","/api/integrations/fb-ads-balances",{data:t})},integrationFbAdsBalancesUpdate:function(t,n){return r("put","/api/integrations/fb-ads-balances/".concat(t),{data:n})},integrationFbAdsBalancesDelete:function(t){return r("delete","/api/integrations/fb-ads-balances/".concat(t))},integrationsCsdProjects:function(t){return r("get","/api/integrations/csd-projects",{params:t})},integrationCsdProjectsShow:function(t){return r("get","/api/integrations/csd-projects/".concat(t))},integrationCsdProjectsStore:function(t){return r("post","/api/integrations/csd-projects",{data:t})},integrationCsdProjectsUpdate:function(t,n){return r("put","/api/integrations/csd-projects/".concat(t),{data:n})},integrationCsdProjectsDelete:function(t){return r("delete","/api/integrations/csd-projects/".concat(t))},integrationEvents:function(t,n){return r("get","/api/integrations/events-".concat(t,"/").concat(n))},integrationEventsCountByEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByEvents"),{params:e})},integrationEventsCountByDaysAndEvents:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/countByDaysAndEvents"),{params:e})},integrationEventsList:function(t,n,e){return r("get","/api/integrations/events-".concat(t,"/").concat(n,"/list"),{params:e})}};n.Z=o},1640:function(t,n,e){var i=e(4165),a=e(5861),r=e(9439),o=e(2791),s=e(7615),c=e(814),u=e(177),l=e(1306),d=e(7145),p=e(4685),g=e(184),f=[{label:"\u0412\u0441\u0456 \u043f\u0440\u0430\u0432\u0430 (admin)",value:"admin"},{label:"WEB \u0406\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0457",value:"web"},{label:"Notifications",value:"notifications"},{label:"CSD",value:"csd"},{label:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456",value:"users"},{label:"Ads Sources",value:"ads-sources"}];n.Z=function(t){var n=t.visible,e=t.onClose,m=t.editUser,v=t.onSuccess,b=s.Z.useForm(),h=(0,r.Z)(b,1)[0],S=(0,o.useState)(!1),x=(0,r.Z)(S,2),k=x[0],Z=x[1],j=!(null===m||void 0===m||!m.id);(0,o.useEffect)((function(){var t,e,i;n&&h.setFieldsValue({name:null!==(t=null===m||void 0===m?void 0:m.name)&&void 0!==t?t:"",email:null!==(e=null===m||void 0===m?void 0:m.email)&&void 0!==e?e:"",active:0!==(null===m||void 0===m?void 0:m.active)&&!1!==(null===m||void 0===m?void 0:m.active),permissions:null!==(i=null===m||void 0===m?void 0:m.permissions)&&void 0!==i?i:[]})}),[n,m,h]);var C=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.validateFields();case 3:if(n=t.sent,Z(!0),!j){t.next=10;break}return t.next=8,p.Z.userUpdate(m.id,n);case 8:t.next=12;break;case 10:return t.next=12,p.Z.userStore(n);case 12:null===v||void 0===v||v(),e(),t.next=20;break;case 16:if(t.prev=16,t.t0=t.catch(0),!t.t0.errorFields){t.next=20;break}return t.abrupt("return");case 20:return t.prev=20,Z(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,16,20,23]])})));return function(){return t.apply(this,arguments)}}();return(0,g.jsx)(c.Z,{open:n,title:j?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",okText:j?"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",cancelText:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onCancel:e,onOk:C,confirmLoading:k,destroyOnClose:!0,width:400,children:(0,g.jsxs)(s.Z,{form:h,layout:"vertical",children:[(0,g.jsx)(s.Z.Item,{name:"name",label:"\u0406\u043c'\u044f",rules:[{required:!1}],children:(0,g.jsx)(u.Z,{placeholder:"\u0406\u043c'\u044f"})}),(0,g.jsx)(s.Z.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:(0,g.jsx)(u.Z,{placeholder:"email@example.com",disabled:j})}),(0,g.jsx)(s.Z.Item,{name:"active",label:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",valuePropName:"checked",children:(0,g.jsx)(l.Z,{})}),(0,g.jsx)(s.Z.Item,{name:"permissions",label:"\u041f\u0440\u0430\u0432\u0430",children:(0,g.jsx)(d.Z,{mode:"multiple",options:f,placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u0440\u0430\u0432\u0430",allowClear:!0})})]})})}},543:function(t,n,e){e.r(n),e.d(n,{UsersList:function(){return k}});var i=e(4165),a=e(5861),r=e(9439),o=e(2791),s=e(7689),c=e(3099),u=e(7309),l=e(6473),d=e(43),p=e(2144),g=e(1752),f=e(2622),m=e(9286),v=e(4685),b=e(9305),h=e(5710),S=e(1640),x=e(184),k=function(){var t=(0,s.s0)(),n=(0,o.useState)({data:[],total:0}),e=(0,r.Z)(n,2),k=e[0],Z=e[1],j=(0,o.useState)(!0),C=(0,r.Z)(j,2),y=C[0],w=C[1],B=(0,o.useState)(1),D=(0,r.Z)(B,2),F=D[0],U=D[1],E=(0,o.useState)(!1),A=(0,r.Z)(E,2),P=A[0],T=A[1],G=(0,o.useState)(null),I=(0,r.Z)(G,2),q=I[0],X=I[1],L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;w(!0),v.Z.users({per_page:20,page:t}).then((function(t){var n;return Z({data:Array.isArray(null===t||void 0===t?void 0:t.data)?t.data:[],total:null!==(n=null===t||void 0===t?void 0:t.total)&&void 0!==n?n:0})})).catch((function(){return Z({data:[],total:0})})).finally((function(){return w(!1)}))};(0,o.useEffect)((function(){return L()}),[F]);var R=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"\u0406\u043c'\u044f",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"",key:"actions",width:100,render:function(t,n){return(0,x.jsxs)(c.Z,{onClick:function(t){return t.stopPropagation()},children:[(0,x.jsx)(u.ZP,{type:"text",size:"small",icon:(0,x.jsx)(g.Z,{}),onClick:function(){X(n),T(!0)}}),(0,x.jsx)(u.ZP,{type:"text",size:"small",danger:!0,icon:(0,x.jsx)(f.Z,{}),onClick:function(t){return function(t,n){var e;null===n||void 0===n||null===(e=n.stopPropagation)||void 0===e||e.call(n),(0,h.j3)((0,a.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Z.userDelete(t.id);case 2:L(1),1!==F&&U(1);case 4:case"end":return n.stop()}}),n)}))),{title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430?",content:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 ".concat(t.name||t.email," \u0431\u0443\u0434\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u0438\u0439.")})}(n,t)}})]})}}];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.Z,{title:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456",extra:(0,x.jsx)(u.ZP,{type:"primary",icon:(0,x.jsx)(m.Z,{}),onClick:function(){X(null),T(!0)},children:"\u0414\u043e\u0434\u0430\u0442\u0438"}),children:(0,x.jsx)(d.Z,{spinning:y,children:(0,x.jsx)(p.Z,{rowKey:"id",columns:R,dataSource:k.data,onRow:function(n){return{style:{cursor:"pointer"},onClick:function(){return t("".concat(b.sH,"/users/").concat(n.id))}}},pagination:{total:k.total,pageSize:20,current:F,onChange:U}})})}),(0,x.jsx)(S.Z,{visible:P,onClose:function(){T(!1),X(null)},editUser:q,onSuccess:function(){L(1),1!==F&&U(1)}})]})};n.default=k}}]);
//# sourceMappingURL=543.6e1089db.chunk.js.map